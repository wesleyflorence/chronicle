<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Chronicle - Login</title>
		<!-- Include Tailwind CSS via CDN for simplicity -->
		<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
	</head>
	<body class="bg-gray-200 flex items-center justify-center h-screen">

		<div class="bg-white p-8 rounded-lg shadow-md w-76">
			<h2 class="text-2xl font-bold mb-4 text-center">Chronicle ðŸ‘‹</h2>
			<form id="loginForm" class="flex flex-col space-y-4">
				<input type="password" id="password" placeholder="Enter your password" required 
					class="p-2 border border-gray-300 rounded-md">
				<button type="submit" class="p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">Login</button>
			</form>
		</div>

		<script>
		document.getElementById('loginForm').addEventListener('submit', function(event) {
			event.preventDefault();

			const password = document.getElementById('password').value;

			fetch('/api/v1/login', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ Password: password })
			}).then(response => {
					if (response.ok) {
						return response.json();
					} else {
						alert('Login failed. Please try again.');
					}
				})
				.then(data => {
					if(data.success) {
						localStorage.setItem('authToken', data.token)
						window.location.href = '/chronicle.html';
					} else {
						alert('Login failed. Please try again.');
					}
				})
				.catch(error => {
					console.error('Error:', error);
				});
		});
		</script>
	</body>
</html>
